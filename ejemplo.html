<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Blog — Carlos Capecchi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
</head>

<body>

  <!-- =======================
       BARRA DE BÚSQUEDA + CONTroles (SEARCH + TAGS)
       ======================= -->
  
    <section aria-label="Buscador de artículos" style="max-width:1200px; margin:0 auto;">
      <!-- Buscador -->
      <div id="searchArea" style="display:flex; align-items:center; gap:14px; margin-bottom:18px;">
        <div style="display:flex; align-items:center; gap:10px; background:rgba(80,130,139,0.06); padding:10px 12px; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,0.06); flex:1;">
          <!-- ICON (puedes reemplazar por SVG o imagen) -->
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79L20 21.49 21.49 20l-5.99-6zM10 15a5 5 0 110-10 5 5 0 010 10z"></path>
          </svg>

          <input id="searchInput" type="search" placeholder="Buscar por título, contenido o etiqueta..." aria-label="Buscar en el blog"
                 style="border:0; outline:none; background:transparent; font-size:16px; flex:1; font-family:inherit;" />
          <button id="clearSearch" aria-label="Limpiar búsqueda" title="Limpiar" style="background:none;border:none;font-size:16px;cursor:pointer;">✕</button>
        </div>

        <div style="display:flex; gap:10px; align-items:center;">
          <button id="clearFilters" class="tag-button" aria-label="Limpiar filtros" title="Limpiar filtros"
                  style="padding:8px 12px; border-radius:10px; border:1px solid rgba(80,130,139,0.12); background:transparent; cursor:pointer;">Limpiar</button>
        </div>
      </div>

      <!-- CONTAINER DE TAGS -->
      <div id="tagsContainer" aria-label="Etiquetas disponibles" style="display:flex; gap:8px; flex-wrap:wrap; margin-bottom:22px;">
        <!-- Las etiquetas se insertan dinámicamente con JS -->
      </div>
    </section>

    <!-- =======================
         LISTADO DE ARTÍCULOS (10)
         Mantén las imágenes en ./images/ con los nombres indicados más abajo.
         ======================= -->
    <section id="postsList" aria-label="Lista de artículos" style="max-width:1200px; margin:0 auto; display:grid; grid-template-columns: repeat(2, 1fr); gap:24px;">
      
      <!-- Nota: cada artículo tiene data-tags separados por comas. -->
      <!-- Reemplaza ./images/article1.jpg por tu imagen preferida. -->

      <article class="post" data-tags="psicologia-clinica,autoestima,bienestar" tabindex="0" style="background:rgba(255,255,255,0.95); border-radius:10px; box-shadow:0 6px 18px rgba(0,0,0,0.06); overflow:hidden;">
        <div class="post-thumb" style="height:180px; background:#ddd;">
          <!-- IMAGEN: reemplazar src por ./images/article1.jpg -->
          <img src="./images/article1.jpg" alt="Reconstrucción de la autoestima" loading="lazy" style="width:100%; height:100%; object-fit:cover;">
        </div>
        <div class="post-body" style="padding:14px 16px; font-family:inherit;">
          <h3 style="font-family:'Montserrat', sans-serif; color:#28545D; margin:0 0 8px; font-size:18px;">Reconstruir la autoestima: prácticas cotidianas</h3>
          <p style="color:#50828b; margin:0 0 10px; line-height:1.45;">Ejercicios breves y relevantes para mejorar el autovalor, establecer límites y sostener el cambio entre sesiones terapéuticas.</p>
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div class="post-tags" style="display:flex; gap:8px; flex-wrap:wrap;">
              <span class="tag-sm" data-tag="psicologia-clinica" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">psicologia-clinica</span>
              <span class="tag-sm" data-tag="autoestima" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">autoestima</span>
              <span class="tag-sm" data-tag="bienestar" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">bienestar</span>
            </div>
            <a href="#" class="read-more" style="text-decoration:none;background:#50828b;color:#fff;padding:8px 10px;border-radius:8px;font-size:13px;">Leer</a>
          </div>
        </div>
      </article>

      <article class="post" data-tags="pareja,comunicacion,intimidad" tabindex="0" style="background:rgba(255,255,255,0.95); border-radius:10px; box-shadow:0 6px 18px rgba(0,0,0,0.06); overflow:hidden;">
        <div class="post-thumb" style="height:180px;">
          <!-- IMAGEN: ./images/article2.jpg -->
          <img src="./images/article2.jpg" alt="Comunicación en pareja" loading="lazy" style="width:100%; height:100%; object-fit:cover;">
        </div>
        <div class="post-body" style="padding:14px 16px;">
          <h3 style="font-family:'Montserrat', sans-serif; color:#28545D; margin:0 0 8px; font-size:18px;">Escucha activa en pareja: técnica y práctica</h3>
          <p style="color:#50828b; margin:0 0 10px; line-height:1.45;">Cómo practicar la escucha activa, los ejercicios de reflejo y la solicitud de cambio sin culpa ni ataque.</p>
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div class="post-tags" style="display:flex; gap:8px; flex-wrap:wrap;">
              <span class="tag-sm" data-tag="pareja" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">pareja</span>
              <span class="tag-sm" data-tag="comunicacion" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">comunicacion</span>
              <span class="tag-sm" data-tag="intimidad" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">intimidad</span>
            </div>
            <a href="#" class="read-more" style="text-decoration:none;background:#50828b;color:#fff;padding:8px 10px;border-radius:8px;font-size:13px;">Leer</a>
          </div>
        </div>
      </article>

      <article class="post" data-tags="sexualidad,deseo,pareja" tabindex="0" style="background:rgba(255,255,255,0.95); border-radius:10px; box-shadow:0 6px 18px rgba(0,0,0,0.06); overflow:hidden;">
        <div class="post-thumb" style="height:180px;">
          <!-- IMAGEN: ./images/article3.jpg -->
          <img src="./images/article3.jpg" alt="Deseo en la pareja" loading="lazy" style="width:100%; height:100%; object-fit:cover;">
        </div>
        <div class="post-body" style="padding:14px 16px;">
          <h3 style="font-family:'Montserrat', sans-serif; color:#28545D; margin:0 0 8px; font-size:18px;">Cuando la rutina apaga el deseo: estrategias simples</h3>
          <p style="color:#50828b; margin:0 0 10px; line-height:1.45;">Ideas concretas para reintroducir deseo y erotismo en relaciones largas sin presiones ni expectativas irreales.</p>
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div class="post-tags" style="display:flex; gap:8px; flex-wrap:wrap;">
              <span class="tag-sm" data-tag="sexualidad" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">sexualidad</span>
              <span class="tag-sm" data-tag="deseo" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">deseo</span>
              <span class="tag-sm" data-tag="pareja" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">pareja</span>
            </div>
            <a href="#" class="read-more" style="text-decoration:none;background:#50828b;color:#fff;padding:8px 10px;border-radius:8px;font-size:13px;">Leer</a>
          </div>
        </div>
      </article>

      <article class="post" data-tags="ansiedad,emociones,psicologia-clinica" tabindex="0" style="background:rgba(255,255,255,0.95); border-radius:10px; box-shadow:0 6px 18px rgba(0,0,0,0.06); overflow:hidden;">
        <div class="post-thumb" style="height:180px;">
          <!-- IMAGEN: ./images/article4.jpg -->
          <img src="./images/article4.jpg" alt="Ansiedad y cuerpo" loading="lazy" style="width:100%; height:100%; object-fit:cover;">
        </div>
        <div class="post-body" style="padding:14px 16px;">
          <h3 style="font-family:'Montserrat', sans-serif; color:#28545D; margin:0 0 8px; font-size:18px;">Ansiedad que duele: entendiendo las señales corporales</h3>
          <p style="color:#50828b; margin:0 0 10px; line-height:1.45;">Relacionar sensaciones físicas y pensamientos para desactivar ciclos de alarma y recuperar control.</p>
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div class="post-tags" style="display:flex; gap:8px; flex-wrap:wrap;">
              <span class="tag-sm" data-tag="ansiedad" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">ansiedad</span>
              <span class="tag-sm" data-tag="emociones" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">emociones</span>
              <span class="tag-sm" data-tag="psicologia-clinica" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">psicologia-clinica</span>
            </div>
            <a href="#" class="read-more" style="text-decoration:none;background:#50828b;color:#fff;padding:8px 10px;border-radius:8px;font-size:13px;">Leer</a>
          </div>
        </div>
      </article>

      <article class="post" data-tags="duelo,resiliencia,psicoterapia" tabindex="0" style="background:rgba(255,255,255,0.95); border-radius:10px; box-shadow:0 6px 18px rgba(0,0,0,0.06); overflow:hidden;">
        <div class="post-thumb" style="height:180px;">
          <!-- IMAGEN: ./images/article5.jpg -->
          <img src="./images/article5.jpg" alt="Duelo y resiliencia" loading="lazy" style="width:100%; height:100%; object-fit:cover;">
        </div>
        <div class="post-body" style="padding:14px 16px;">
          <h3 style="font-family:'Montserrat', sans-serif; color:#28545D; margin:0 0 8px; font-size:18px;">Duelo: pequeños pasos para sostener la pérdida</h3>
          <p style="color:#50828b; margin:0 0 10px; line-height:1.45;">Estrategias para acompañar procesos de pérdida desde la compasión y la mirada terapéutica.</p>
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div class="post-tags" style="display:flex; gap:8px; flex-wrap:wrap;">
              <span class="tag-sm" data-tag="duelo" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">duelo</span>
              <span class="tag-sm" data-tag="resiliencia" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">resiliencia</span>
              <span class="tag-sm" data-tag="psicoterapia" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">psicoterapia</span>
            </div>
            <a href="#" class="read-more" style="text-decoration:none;background:#50828b;color:#fff;padding:8px 10px;border-radius:8px;font-size:13px;">Leer</a>
          </div>
        </div>
      </article>

      <article class="post" data-tags="infancia,desarrollo,familia" tabindex="0" style="background:rgba(255,255,255,0.95); border-radius:10px; box-shadow:0 6px 18px rgba(0,0,0,0.06); overflow:hidden;">
        <div class="post-thumb" style="height:180px;">
          <!-- IMAGEN: ./images/article6.jpg -->
          <img src="./images/article6.jpg" alt="Desarrollo infantil" loading="lazy" style="width:100%; height:100%; object-fit:cover;">
        </div>
        <div class="post-body" style="padding:14px 16px;">
          <h3 style="font-family:'Montserrat', sans-serif; color:#28545D; margin:0 0 8px; font-size:18px;">Señales de alerta en el desarrollo infantil</h3>
          <p style="color:#50828b; margin:0 0 10px; line-height:1.45;">Qué observar en el aula y en casa, y cuándo derivar a evaluación especializada.</p>
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div class="post-tags" style="display:flex; gap:8px; flex-wrap:wrap;">
              <span class="tag-sm" data-tag="infancia" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">infancia</span>
              <span class="tag-sm" data-tag="desarrollo" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">desarrollo</span>
              <span class="tag-sm" data-tag="familia" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">familia</span>
            </div>
            <a href="#" class="read-more" style="text-decoration:none;background:#50828b;color:#fff;padding:8px 10px;border-radius:8px;font-size:13px;">Leer</a>
          </div>
        </div>
      </article>

      <article class="post" data-tags="trabajo,estres,organizacional" tabindex="0" style="background:rgba(255,255,255,0.95); border-radius:10px; box-shadow:0 6px 18px rgba(0,0,0,0.06); overflow:hidden;">
        <div class="post-thumb" style="height:180px;">
          <!-- IMAGEN: ./images/article7.jpg -->
          <img src="./images/article7.jpg" alt="Estrés laboral" loading="lazy" style="width:100%; height:100%; object-fit:cover;">
        </div>
        <div class="post-body" style="padding:14px 16px;">
          <h3 style="font-family:'Montserrat', sans-serif; color:#28545D; margin:0 0 8px; font-size:18px;">Pequeñas intervenciones para reducir el estrés laboral</h3>
          <p style="color:#50828b; margin:0 0 10px; line-height:1.45;">Técnicas breves que equipos y líderes pueden aplicar para mejorar el clima y la productividad.</p>
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div class="post-tags" style="display:flex; gap:8px; flex-wrap:wrap;">
              <span class="tag-sm" data-tag="trabajo" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">trabajo</span>
              <span class="tag-sm" data-tag="estres" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">estres</span>
              <span class="tag-sm" data-tag="organizacional" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">organizacional</span>
            </div>
            <a href="#" class="read-more" style="text-decoration:none;background:#50828b;color:#fff;padding:8px 10px;border-radius:8px;font-size:13px;">Leer</a>
          </div>
        </div>
      </article>

      <article class="post" data-tags="identidad,sexualidad,apoyo" tabindex="0" style="background:rgba(255,255,255,0.95); border-radius:10px; box-shadow:0 6px 18px rgba(0,0,0,0.06); overflow:hidden;">
        <div class="post-thumb" style="height:180px;">
          <!-- IMAGEN: ./images/article8.jpg -->
          <img src="./images/article8.jpg" alt="Identidad y orientación" loading="lazy" style="width:100%; height:100%; object-fit:cover;">
        </div>
        <div class="post-body" style="padding:14px 16px;">
          <h3 style="font-family:'Montserrat', sans-serif; color:#28545D; margin:0 0 8px; font-size:18px;">Acompañamiento en procesos de identidad: pautas para profesionales</h3>
          <p style="color:#50828b; margin:0 0 10px; line-height:1.45;">Buenas prácticas clínicas para crear un espacio seguro y libre de juicios en procesos de exploración de identidad.</p>
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div class="post-tags" style="display:flex; gap:8px; flex-wrap:wrap;">
              <span class="tag-sm" data-tag="identidad" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">identidad</span>
              <span class="tag-sm" data-tag="sexualidad" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">sexualidad</span>
              <span class="tag-sm" data-tag="apoyo" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">apoyo</span>
            </div>
            <a href="#" class="read-more" style="text-decoration:none;background:#50828b;color:#fff;padding:8px 10px;border-radius:8px;font-size:13px;">Leer</a>
          </div>
        </div>
      </article>

      <article class="post" data-tags="habitos,salud-mental,bienestar" tabindex="0" style="background:rgba(255,255,255,0.95); border-radius:10px; box-shadow:0 6px 18px rgba(0,0,0,0.06); overflow:hidden;">
        <div class="post-thumb" style="height:180px;">
          <!-- IMAGEN: ./images/article9.jpg -->
          <img src="./images/article9.jpg" alt="Hábitos para la salud mental" loading="lazy" style="width:100%; height:100%; object-fit:cover;">
        </div>
        <div class="post-body" style="padding:14px 16px;">
          <h3 style="font-family:'Montserrat', sans-serif; color:#28545D; margin:0 0 8px; font-size:18px;">Hábitos mínimos para cuidar la salud mental</h3>
          <p style="color:#50828b; margin:0 0 10px; line-height:1.45;">Pequeñas prácticas diarias con alto retorno emocional: sueño, límites digitales y rutinas de autocuidado.</p>
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div class="post-tags" style="display:flex; gap:8px; flex-wrap:wrap;">
              <span class="tag-sm" data-tag="habitos" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">habitos</span>
              <span class="tag-sm" data-tag="salud-mental" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">salud-mental</span>
              <span class="tag-sm" data-tag="bienestar" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">bienestar</span>
            </div>
            <a href="#" class="read-more" style="text-decoration:none;background:#50828b;color:#fff;padding:8px 10px;border-radius:8px;font-size:13px;">Leer</a>
          </div>
        </div>
      </article>

      <article class="post" data-tags="relaciones,conflicto,mediacion" tabindex="0" style="background:rgba(255,255,255,0.95); border-radius:10px; box-shadow:0 6px 18px rgba(0,0,0,0.06); overflow:hidden;">
        <div class="post-thumb" style="height:180px;">
          <!-- IMAGEN: ./images/article10.jpg -->
          <img src="./images/article10.jpg" alt="Resolución de conflictos" loading="lazy" style="width:100%; height:100%; object-fit:cover;">
        </div>
        <div class="post-body" style="padding:14px 16px;">
          <h3 style="font-family:'Montserrat', sans-serif; color:#28545D; margin:0 0 8px; font-size:18px;">Conflictos relacionales: pasos para una mediación efectiva</h3>
          <p style="color:#50828b; margin:0 0 10px; line-height:1.45;">Guía práctica para conducir una mediación inicial y transformar el conflicto en oportunidad de cambio.</p>
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div class="post-tags" style="display:flex; gap:8px; flex-wrap:wrap;">
              <span class="tag-sm" data-tag="relaciones" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">relaciones</span>
              <span class="tag-sm" data-tag="conflicto" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">conflicto</span>
              <span class="tag-sm" data-tag="mediacion" style="font-size:12px;padding:5px 8px;border-radius:12px;background:rgba(80,130,139,0.08);color:#28545D;cursor:pointer;">mediacion</span>
            </div>
            <a href="#" class="read-more" style="text-decoration:none;background:#50828b;color:#fff;padding:8px 10px;border-radius:8px;font-size:13px;">Leer</a>
          </div>
        </div>
      </article>

    </section>

    <!-- Mensaje si no hay coincidencias -->
    <div id="noResults" style="max-width:1200px; margin:18px auto; color:#666; display:none; text-align:center;">No se encontraron artículos que coincidan con tu búsqueda.</div>




<script>
    (function(){
      // Elementos
      const posts = Array.from(document.querySelectorAll('.post'));
      const searchInput = document.getElementById('searchInput');
      const clearSearchBtn = document.getElementById('clearSearch');
      const tagsContainer = document.getElementById('tagsContainer');
      const clearFiltersBtn = document.getElementById('clearFilters');
      const noResults = document.getElementById('noResults');

      // Normalizar texto (sin acentos, minúsculas)
      function normalizeText(s){
        return (s||'').toString().toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'');
      }

      // Construir listado de etiquetas únicas a partir de data-tags
      const tagMap = {}; // tag -> count
      posts.forEach(p => {
        const raw = p.getAttribute('data-tags') || '';
        raw.split(',').map(t=>t.trim()).filter(Boolean).forEach(t=>{
          tagMap[t] = (tagMap[t]||0) + 1;
        });
      });

      const tags = Object.keys(tagMap).sort();

      // Crear botones de tags en la UI
      tags.forEach(tag => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'tag-button';
        btn.textContent = tag.replace(/-/g,' ');
        btn.dataset.tag = tag;
        btn.setAttribute('aria-pressed','false');
        btn.style.marginRight = '6px';
        btn.addEventListener('click', () => {
          const isActive = btn.classList.toggle('active');
          btn.setAttribute('aria-pressed', isActive ? 'true' : 'false');
          applyFilters();
        });
        tagsContainer.appendChild(btn);
      });

      // event listeners
      searchInput.addEventListener('input', applyFilters);
      clearSearchBtn.addEventListener('click', () => { searchInput.value=''; applyFilters(); searchInput.focus(); });
      clearFiltersBtn.addEventListener('click', () => {
        // reset all tag buttons
        tagsContainer.querySelectorAll('.tag-button').forEach(b => { b.classList.remove('active'); b.setAttribute('aria-pressed','false');});
        searchInput.value='';
        applyFilters();
      });

      function getActiveTags(){
        return Array.from(tagsContainer.querySelectorAll('.tag-button.active')).map(b => b.dataset.tag);
      }

      function applyFilters(){
        const q = normalizeText(searchInput.value.trim());
        const activeTags = getActiveTags();
        let visible = 0;

        posts.forEach(post => {
          const title = normalizeText(post.querySelector('h3').textContent);
          const excerpt = normalizeText(post.querySelector('p').textContent);
          const dataTags = (post.getAttribute('data-tags') || '').split(',').map(t=>t.trim());

          const matchesQuery = !q || title.includes(q) || excerpt.includes(q) || dataTags.some(dt => dt.includes(q));
          const matchesTags = activeTags.length === 0 || dataTags.some(dt => activeTags.includes(dt));

          const show = matchesQuery && matchesTags;
          post.style.display = show ? 'block' : 'none';
          if(show) visible++;
        });

        noResults.style.display = visible === 0 ? 'block' : 'none';
      }

      // Hacer clickable cada tag pequeña dentro del post para filtrar por esa etiqueta
      document.querySelectorAll('.tag-sm').forEach(ts => {
        ts.addEventListener('click', () => {
          const tagKey = ts.dataset.tag;
          // activar el botón de filtro correspondiente
          const btn = Array.from(tagsContainer.querySelectorAll('.tag-button')).find(b => b.dataset.tag === tagKey);
          if(btn){
            // Si ya activo, lo desactiva; si no, lo activa y desactiva los demás (comportamiento: toggle)
            btn.classList.toggle('active');
            btn.setAttribute('aria-pressed', btn.classList.contains('active') ? 'true' : 'false');
            applyFilters();
            // scroll to top of posts area for UX
            document.getElementById('postsList').scrollIntoView({behavior:'smooth', block:'start'});
          }
        });
      });

      // Inicializar (mostrar todos)
      applyFilters();

      // Accesibilidad: Enter / Space para activar tag-buttons (keyboard)
      tagsContainer.addEventListener('keydown', (e) => {
        if(e.target && e.target.matches('.tag-button') && (e.key === 'Enter' || e.key === ' ')){
          e.preventDefault();
          e.target.click();
        }
      });

    })();
  </script>

</body>
</html>